{% extends "base.html" %}

{% block title %}Home - DODT{% endblock %}

{% block content %}
<style>
    .main-video-container {
        position: relative;
        width: 100%;
        /* 9:16 aspect ratio: height = width * (16 / 9) */
        /* To make it responsive and fit height of viewport */
        padding-top: calc(100% * (16 / 9)); /* Aspect ratio 9:16 based on width */
        max-height: 100vh; /* Limit height to viewport height */
        overflow: hidden;
        background-color: black;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .main-video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover; /* Cover the container while maintaining aspect ratio */
        object-position: center;
    }

    .feed-preview-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr); /* 2 columns */
        gap: 10px; /* Gap between grid items */
        padding: 10px;
        max-width: 800px; /* Max width for the grid */
        margin: 20px auto;
    }

    .feed-preview-item {
        position: relative;
        width: 100%;
        padding-top: 100%; /* 1:1 aspect ratio for preview images */
        overflow: hidden;
        border-radius: 8px;
        background-color: #f0f0f0;
        cursor: pointer;
    }

    .feed-preview-item img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .feed-preview-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%);
        color: white;
        padding: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        opacity: 0;
        transition: opacity 0.3s ease;
        font-size: 0.8em;
    }

    .feed-preview-item:hover .feed-preview-overlay {
        opacity: 1;
    }

    .overlay-info span {
        display: block;
    }

    .overlay-likes {
        display: flex;
        align-items: center;
    }

    .overlay-likes i {
        margin-right: 4px;
        color: white; /* Heart icon color */
    }
</style>

<div class="main-video-container">
    <video class="main-video" autoplay muted loop playsinline>
        <source src="/static/videos/nas.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>

<div class="container mt-4">
    <h2 class="text-center mb-3">Feed 미리보기 (인기순)</h2>
    <div class="feed-preview-grid">
        {% for i in range(6) %}
        <div class="feed-preview-item">
            <!-- Placeholder image - replace with actual feed images from backend later -->
            <img src="https://picsum.photos/id/{{ 1025 + i }}/300/300" alt="Feed Item Placeholder">
            <div class="feed-preview-overlay">
                <div class="overlay-info">
                    <span>CreatorID{{ i+1 }}</span>
                    <span>2025-12-{{ 24-i }}</span>
                </div>
                <div class="overlay-likes">
                    <i class="fas fa-heart"></i> <!-- Font Awesome heart icon -->
                    <span>{{ 100 + i*10 }}</span>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Font Awesome for icons -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
{% endblock %}