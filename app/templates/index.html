{% extends "base.html" %}

{% block title %}Home - DODT{% endblock %}

{% block content %}
<style>
    .video-container {
        width: 100%;
        max-width: 400px; /* Example max-width, can be adjusted */
        margin: auto;
        aspect-ratio: 9 / 16;
        overflow: hidden;
        position: relative;
    }
    #home-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
</style>
<div class="video-container">
    <video id="home-video" src="/static/videos/nas.mp4" muted playsinline loop></video>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener("DOMContentLoaded", function() {
    const video = document.getElementById("home-video");

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                video.play().catch(error => console.log("Autoplay was prevented: ", error));
            } else {
                video.pause();
            }
        });
    }, {
        threshold: 0.5 // Start playing when 50% of the video is visible
    });

    observer.observe(video);
});
</script>
{% endblock %}